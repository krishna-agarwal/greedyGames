<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">

    <title>Music</title>

  <link href="css/style.css" rel="stylesheet">
	<link href="css/bootstrap.min.css" rel="stylesheet">

  <script type="text/javascript" src="js/lib/angular.min.js"></script>
  <script type="text/javascript" src="js/lib/angular-resource.min.js"></script>
	<script type="text/javascript" src="js/lib/ui-bootstrap-tpls-1.3.2.min.js"></script>
  <script type="text/javascript" src="js/lib/sound-cloud-sdk-3.0.0.js"></script>
  <script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/directives.js"></script>
	<script type="text/javascript" src="js/services.js"></script>
  <script type="text/javascript" src="js/factory.js"></script>

  </head>
  <body ng-app="musicApp" ng-controller="mainController">
    <div class="header">
  		{{appTitle}}
  	</div>
  	<div class="container">
  		<div class="tracksContainer">
        <div id="trackHeader">
          <h3>Music Tracks</h3>
          <div class="input-group">
            <div class="input-group-addon">search</div>
            <input type="text" class="form-control" ng-model="searchText">
          </div>
        </div>
  			<table class="table">
  			  <tr ng-repeat="track in tracks| start: (currentTrackPage - 1) * pageSize | limitTo: pageSize | filter:searchText" class="trackRow" ng-click="openTrackModal('sm',track)" ng-mouseenter="toggleMusicPlayer(track)" ng-mouseleave="toggleMusicPlayer(track)">
    				<td>{{track.title}}</td>
    				<td>
              <span ng-repeat="genre in track.genres">{{genre.name}} </span><br><br>
              <div class="musicPlayer" id="player_{{track.id}}">
                <button class="btn btn-danger" id="playBtn_{{track.id}}" ng-click="playSoundCloud(track);$event.stopPropagation();">play</button><br>
                <span ng-hide="showTimer(track.id)">{{currentTime}} / {{totalTime}}</span>
                <input ng-hide="showTimer(track.id)" ng-click="$event.stopPropagation();" ng-change="changeVolume(volume)" ng-model="volume" type="range" name="points" min="0" max="10">
              </div>
            </td>
            <td star-rating rating-value="track.rating" max="5" read-only="true">    
            </td>
  			  </tr>
  			</table>
  			<button type="button" class="btn btn-danger" id="addTrackButton" ng-click="openTrackModal('sm')">Add New Track</button>
  			<uib-pagination total-items="tracks.length" rotate="true" boundary-link-numbers="true" max-size="5" ng-model="currentTrackPage" items-per-page="pageSize" id="trackPagination"></uib-pagination>
  		</div>

      <hr>

  		<div class="genreContainer">
        <div id="trackHeader">
          <h3>Track's Genre</h3>
        </div>
  			<table class="table">
  			  <tr ng-repeat="genre in genres| start: (currentGenrePage - 1) * pageSize | limitTo: pageSize" class="trackRow" ng-click="openGenreModal('sm',genre)">
  				<td>{{genre.name}}</td>
  			  </tr>
  			</table>
  			<button type="button" class="btn btn-danger" id="addTrackButton" ng-click="openGenreModal('sm')">Add New Genre</button>
  			<uib-pagination total-items="genres.length" rotate="true" boundary-link-numbers="true" max-size="5" ng-model="currentGenrePage" items-per-page="pageSize" id="genrePagination"></uib-pagination>
  		</div>
  	</div>
  	<div class="footer">
  	</div>
  </body>
</html>